#!/bin/bash

# kurbeScript: Start Kubernetes cluster, verify, list pods

echo "=== Starting kurbeScript ==="

# Check if Minikube is installed
if ! command -v minikube &> /dev/null
then
    echo "❌ Minikube is not installed. Please install Minikube first."
    exit 1
else
    echo "✅ Minikube is installed: $(minikube version)"
fi

# Check if kubectl is installed
if ! command -v kubectl &> /dev/null
then
    echo "❌ kubectl is not installed. Please install kubectl first."
    exit 1
else
    echo "✅ kubectl is installed: $(kubectl version --client --short | head -n1)"
fi

# Check if Docker is running
if ! docker info &> /dev/null
then
    echo "❌ Docker does not seem to be running. Please start Docker Desktop."
    exit 1
else
    echo "✅ Docker is running"
fi

# Start Minikube with Docker driver
echo "🚀 Starting Minikube with Docker driver..."
minikube start --driver=docker

# Verify the cluster
echo "🔎 Verifying Kubernetes cluster..."
kubectl cluster-info

# List all pods in all namespaces
echo "📦 Listing all pods..."
kubectl get pods --all-namespaces

echo "🏁 kurbeScript completed successfully!"
