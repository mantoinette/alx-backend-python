#!/bin/bash

# kurbeScript: Start Kubernetes cluster, verify, list pods

echo "=== Starting kurbeScript ==="

# Check if Minikube is installed
if ! command -v minikube &> /dev/null
then
    echo "âŒ Minikube is not installed. Please install Minikube first."
    exit 1
else
    echo "âœ… Minikube is installed: $(minikube version)"
fi

# Check if kubectl is installed
if ! command -v kubectl &> /dev/null
then
    echo "âŒ kubectl is not installed. Please install kubectl first."
    exit 1
else
    echo "âœ… kubectl is installed: $(kubectl version --client --short | head -n1)"
fi

# Check if Docker is running
if ! docker info &> /dev/null
then
    echo "âŒ Docker does not seem to be running. Please start Docker Desktop."
    exit 1
else
    echo "âœ… Docker is running"
fi

# Start Minikube with Docker driver
echo "ğŸš€ Starting Minikube with Docker driver..."
minikube start --driver=docker

# Verify the cluster
echo "ğŸ” Verifying Kubernetes cluster..."
kubectl cluster-info

# List all pods in all namespaces
echo "ğŸ“¦ Listing all pods..."
kubectl get pods --all-namespaces

echo "ğŸ kurbeScript completed successfully!"
